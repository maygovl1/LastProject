package kr.or.navi.mypage.service;

import java.util.List;

import javax.inject.Inject;

import org.springframework.stereotype.Service;

import kr.or.navi.common.paging.PaginationInfo;
import kr.or.navi.enumpkg.ServiceResult;
import kr.or.navi.mapper.dao.EmpDAO;
import kr.or.navi.mypage.dao.MypageDAO;
import kr.or.navi.vo.BoardPostVO;
import kr.or.navi.vo.EmpVO;
import kr.or.navi.vo.IssueVO;
import kr.or.navi.vo.ProjectVO;

@Service
public class MypageServiceImpl implements MypageService {
	
	@Inject
	private EmpDAO dao;
	
	@Inject
	private MypageDAO mdao;
	
	/**
	 * 개인정보 수정
	 */
	public ServiceResult modifyEmp(EmpVO vo) {
		ServiceResult result = null;
		result = mdao.updateEmp(vo) > 0 ? ServiceResult.OK : ServiceResult.FAIL;
		return result;
	}

	/**
	 * 개인정보 조회
	 */
	@Override
	public EmpVO selectOne(String empId) {
		return dao.selectOne(empId);
	}
	
	/**
	 * 나의 프로젝트 리스트
	 */
	@Override
	public List<ProjectVO> myProjectList(String empId, PaginationInfo paging) {
		int totalRecord = mdao.selectTotalRecordProject(empId, paging);
		paging.setTotalRecord(totalRecord);
	    return mdao.myProjectList(empId, paging);
	}

	/**
	 * 나의 이슈 리스트
	 */
	@Override
	public List<IssueVO> myIssueList(String empId, PaginationInfo paging) {
		int totalRecord = mdao.selectTotalRecordIssue(empId, paging);
		paging.setTotalRecord(totalRecord);
		return mdao.myIssueList(empId, paging);
	}

	/**
	 * 나의 커뮤니티 리스트
	 */
	@Override
	public List<BoardPostVO> myBoardList(String empId, PaginationInfo paging) {
		int totalRecord = mdao.selectTotalRecordBoard(empId, paging);
		paging.setTotalRecord(totalRecord);
		return mdao.myBoardList(empId, paging);
	}
}