package kr.or.navi.vo;

import java.io.Serializable;
import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;
import java.util.ArrayList;
import java.util.List;

import javax.validation.constraints.NotBlank;
import javax.validation.groups.Default;

import org.apache.commons.lang3.StringUtils;
import org.springframework.web.multipart.MultipartFile;

import kr.or.navi.validate.AnoInsertGroup;
import kr.or.navi.validate.FormInsertGroup;
import lombok.Data;
import lombok.EqualsAndHashCode;

@Data
@EqualsAndHashCode(of="bpId")
public class BoardPostVO implements Serializable{
	private int rnum;
	private int boNo;
	private String bpId;
	private String empId;
	private String bpModId;
	private String brdId;
	@NotBlank(groups = {AnoInsertGroup.class,FormInsertGroup.class,Default.class})
	private String bpTitle;
	@NotBlank(groups = {AnoInsertGroup.class,FormInsertGroup.class,Default.class})
	private String bpCn;
	private LocalDateTime bpRegDt;
	private LocalDateTime bpDelDt;
	private String bpOpYn;
	private Integer bpCnt;
	private LocalDateTime bpModDt;
	private String bpShrYn;
	@NotBlank(groups = {AnoInsertGroup.class})
	private String bpNtcId;
	private String empName;
	private String bpNtcName;
	private String cmAtt1;
	private String cmName;
	private String shrName;
	private String bpQnaAs;
	private String bpQnaYn;
	private String qnaName;
	private EmpVO emp;
	private List<BoardPostFileVO> bpFileVoList;
	private MultipartFile[] bpAttchFile;
	
	
	public List<BoardPostFileVO> getBpFileVoList(){
		bpFileVoList = new ArrayList<BoardPostFileVO>();
		if(bpAttchFile != null) {
			for (MultipartFile file : bpAttchFile) {
			BoardPostFileVO ddf = new BoardPostFileVO();
			ddf.setBpAttchFile(file);
			ddf.setBpId(bpId);
			bpFileVoList.add(ddf);
		}
		}
		return bpFileVoList;
	}
	
	public String getBpRegDtStr(){
		if(bpRegDt!=null)
		return bpRegDt.format(DateTimeFormatter.ISO_DATE);

		return null;
	}
	
	public String getBpModDtStr(){
		if(bpModDt!=null)
		return bpModDt.format(DateTimeFormatter.ISO_DATE);

		return null;
	}
	
	public String getBpDelDtStr(){
		if(bpDelDt!=null)
		return bpDelDt.format(DateTimeFormatter.ISO_DATE);
		
		return null;
	}
	
	public String getBpShrYn() {
		if(StringUtils.isNotBlank(bpShrYn)) {
			return bpShrYn.trim();
		}else {
			return bpShrYn;
		}
	}
	

}
