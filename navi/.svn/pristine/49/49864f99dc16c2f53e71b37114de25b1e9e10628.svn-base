<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@ taglib uri="http://www.springframework.org/tags" prefix="spring"%>

<style>
.before_change{
	height: 250px;
 	width: 100%;
  	background-color: #200A97;
   	margin-bottom: 15px;
}

</style>

<form id="submitForm" action="">
	<input type="hidden" name="page" /> <input type="hidden"
		name="searchType" value="" /> <input type="hidden" name="searchWord"
		value="" />
</form>

<!-- 화면비율을 보기위한 임시의 div -->
<div class="content-box before_change"></div>


<!--inner-->
<div class="side_inner">
	<div class="content-box">	
		  <%-- 검색 --%>	
				<div data-pg-role="searchUI" data-pg-target="#submitForm"
					class="searchBox d-flex justify-content-end">
					<!-- 입력용도 UI  -->
					<select class="me-1" name="">
						<!-- 프롬프트 옵션  value는 공백(whitespace) -->
						<option value="">전체</option>
						<option value="name">이름</option>
						<option value="address">주소</option>
					</select>
					<select class="me-1" name="">
						<option value="">전체</option>
						<option value="name">이름</option>
						<option value="address">주소</option>
					</select>
					<div class="fieldset flex">
						<input class="me-1" type="text" name="searchWord"
							data-pg-init-value="" title="검색어를 입력해주세요"
							placeholder="검색어를 입력해주세요" />
						<button type="button" class="btn btn-primary"
							data-pg-role="searchBtn">검색</button>
					</div>

				</div>
				<%-- 검색 --%>	
		
		
		
		<table class="table text-center">
				<caption class="sr-only">일감목록 테이블입니다.</caption>
				<colgroup>
					<col style="width:5%">
					<col style="width: 8%;">
					<col style="width: 10%;">
					<col style="width: 10%;">
					<col style="width: auto;">
					<col style="width: 10%;">
					<col style="width: 10%;">
					<col style="width: 10%;">
				</colgroup>

				<thead>
					<tr>
						<th>
							<input type="checkbox">
						</th>
						<th scope="col">번호</th>
						<th scope="col">일감ID</th>
						<th scope="col">상태</th>
						<th scope="col">제목</th>
						<th scope="col">담당자</th>
						<th scope="col">진행상태</th>
						<th scope="col">등록일</th>
					</tr>
				</thead>
				<tbody>
			<!-- 	<span class="category ordinary">일반</span>
				<span class="category emergency">긴급</span>
				<span class="category new">신규</span> -->
			<!-- 일반 -->
				
						<c:if test="${not empty taskList }">
								<c:forEach items="${taskList }" var="task">
								<tr>
									<th>
										<input type="checkbox">
									</th>
									<td>00001</td>
									<td>${task.taskId }</td>
									<td>
									  	<c:if test="${task.taskStatus.tsName eq '일반'}">
      										<span class="category ordinary">${task.taskStatus.tsName }</span>
     									</c:if>
     									<c:if test="${task.taskStatus.tsName eq '긴급'}">
      										<span class="category emergency">${task.taskStatus.tsName }</span>
     									</c:if>
     									<c:if test="${task.taskStatus.tsName eq '신규'}">
      										<span class="category new">${task.taskStatus.tsName }</span>
     									</c:if>
									</td>
									<td class="text-start">
										<c:set var="project" value="${task.projectMap }"/>
										<a href="<c:url value='/task/${task.taskId }'/>">
											<em class="text-elipsis"><span class="fw-bold">[${project.prodName}]</span> &nbsp;${task.taskTitle }</em>
										</a>
									</td>
									<td>${task.taskManId }</td>
									<td>${task.taskProcessStatus.tpsIng }</td>
									<td>${task.taskRegDt}</td>
								</tr>
							</c:forEach>
						
						</c:if>
					
				</tbody>

			</table>

		<tfoot>
			<!-- 삭제버튼과 삭제확인 모달 -->
			<div class="right float-end delete_content">
				<button class="btn btn-danger" data-bs-toggle="modal"
					data-bs-target="#deleteModal">삭제</button>
				<form id="deleteForm"
					action="${pageContext.request.contextPath }/admin/project">
					<div class="modal fade" id="deleteModal" tabindex="-1"
						aria-labelledby="exampleModalLabel" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<strong class="modal-title fs-5" id="deleteModalLabel">안내</strong>
									<button type="button" class="btn-close" data-bs-dismiss="modal"
										aria-label="Close"></button>
								</div>
								<div class="modal-body" id="deleteResult">"일감를 삭제하시겠습니까?"</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-secondary"
										data-bs-dismiss="modal">닫기</button>
									<button type="submit" class="btn btn-danger" id="deleteBtn">삭제</button>
								</div>
							</div>
						</div>
					</div>
				</form>
			</div>
			<!-- // 삭제버튼과 삭제확인 모달 -->
		</tfoot>

	</div>
</div>
<!--inner-->